var member1=document.getElementById("member1"),member2=document.getElementById("member2"),member3=document.getElementById("member3"),member4=document.getElementById("member4");const memberDetails=document.querySelector("#memberDetails");var dynamicCSS=document.createElement("style");function buildForm(e,n,t){if(t)return"";let a='\n    <div class="mt-4">\n      <h5>Member 1 &#40;Team Leader&#41; Details&#58;</h5>\n      <div\n        class="form-group mt-3 wrap-input100 validate-input bg1"\n        data-validate="Please Enter Member 1\'s Name"\n      >\n        <label class="label-input100">Name</label>\n        <input\n          type="text"\n          name="members.0.memberName"\n          class="form-control input100"\n          id="member1-name"\n          placeholder="Enter your name"\n          required\n        />\n      </div>\n      <div\n        class="form-group wrap-input100 validate-input bg1"\n        data-validate="Please Enter Member 1\'s Class"\n      >\n        <label class="label-input100">Class</label>\n        <input\n          type="text"\n          name="members.0.class"\n          class="form-control input100"\n          id="member1-class"\n          placeholder="Enter your class"\n          required\n        />\n      </div>\n      <div\n        class="form-group wrap-input100 validate-input bg1"\n        data-validate="Please Enter Member 1\'s Contact Number"\n      >\n        <label class="label-input100">Contact Number</label>\n        <input\n          type="text"\n          name="members.0.contact"\n          class="form-control input100"\n          id="member1-contact"\n          placeholder="Enter your contact number"\n          required\n        />\n      </div>\n    </div>\n  ';for(let t=2;t<=n;t++)a+=`\n    <div class="mt-4">\n      <h5>Member ${t} Details&#58;</h5>\n      <div\n        class="form-group mt-3 wrap-input100 ${t<=e?"validate-input":""} bg1"\n        data-validate="Please Enter Member 1's Name"\n      >\n        <label class="label-input100">Name</label>\n        <input\n          type="text"\n          name="members.${t-1}.memberName"\n          class="form-control input100"\n          id="member1-name"\n          placeholder="Enter your name"\n          ${t<=e?"required":""}\n        />\n      </div>\n      <div\n        class="form-group wrap-input100 ${t<=e?"validate-input":""} bg1"\n        data-validate="Please Enter Member 1's Class"\n      >\n        <label class="label-input100">Class</label>\n        <input\n          type="text"\n          name="members.${t-1}.class"\n          class="form-control input100"\n          id="member1-class"\n          placeholder="Enter your class"\n          ${t<=e?"required":""}\n        />\n      </div>\n      <div\n        class="form-group wrap-input100 ${t<=e?"validate-input":""} bg1"\n        data-validate="Please Enter Member 1's Contact Number"\n      >\n        <label class="label-input100">Contact Number</label>\n        <input\n          type="text"\n          name="members.${t-1}.contact"\n          class="form-control input100"\n          id="member1-contact"\n          placeholder="Enter your contact number"\n          ${t<=e?"required":""}\n        />\n      </div>\n    </div>\n    `;return a}function attachValidations(){function e(e){if("email"==$(e).attr("type")||"email"==$(e).attr("name")){if(null==$(e).val().trim().match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/))return!1}else if(""==$(e).val().trim())return!1}function n(e){var n=$(e).parent();$(n).addClass("alert-validate"),$(n).append('<span class="btn-hide-validate"><i class="fas fa-times"></i></span>'),$(".btn-hide-validate").each(function(){$(this).on("click",function(){var e;e=$(this).parent(),$(e).removeClass("alert-validate"),$(e).find(".btn-hide-validate").remove()})})}$(".validate-input .input100").each(function(){$(this).on("blur",function(){0==e(this)?n(this):$(this).parent().addClass("true-validate")})});var t=$(".validate-input .input100");$(".validate-form").on("submit",function(){for(var a=!0,r=0;r<t.length;r++)0==e(t[r])&&(n(t[r]),a=!1);return a})}function eventSelected(e){const n=e.value,{min:t,max:a}=e.dataset;memberDetails.innerHTML=buildForm(t,a,"null"===n),attachValidations()}function unflatten(e){var n={};for(var t in e){var a=t.split(".");a.reduce(function(n,r,l){return n[r]||(n[r]=isNaN(Number(a[l+1]))?a.length-1==l?e[t]:{}:[])},n)}return n}function submitted(e){e.preventDefault();const n=new FormData(e.target);let t=Object.fromEntries(n);t=unflatten(t=Object.fromEntries(Object.entries(t).filter(([e,n])=>""!==n))),console.log(t),fetch(`${baseURL}/uosc`,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then(e=>{if(console.log(e),document.getElementById("register-section").scrollIntoView(),e.ok)return document.getElementById("alertSuccess").style.display="block",document.getElementById("registrationForm").reset(),memberDetails.innerHTML=buildForm(0,0,!0),setTimeout(()=>{document.getElementById("alertSuccess").style.display="none"},3e3),dynamicCSS.innerHTML=dynamicCSS.innerHTML.replace(/content: "✓";/,'content: ""'),e.json();throw document.getElementById("alertFailure").style.display="block",setTimeout(()=>{document.getElementById("alertFailure").style.display="none"},3e3),dynamicCSS.innerHTML=dynamicCSS.innerHTML.replace(/content: "✓";/,'content: ""'),Error(e.statusText)}).then(e=>{console.log(e)}).catch(e=>console.error(e))}dynamicCSS.innerHTML='.true-validate::after {content: "✓";  }',document.head.appendChild(dynamicCSS),document.getElementById("registrationForm").addEventListener("submit",submitted);